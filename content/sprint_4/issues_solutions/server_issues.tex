%!TEX root = ../../../super_main.tex

\section{Server Issues}
\label{sec:server_issues}

Nearing the end of sprint four, one of the \emph{Build \& Deployment} groups decided to upgrade the server with additional storage. This was attempted the night between Thursday and Friday before the planned sprint end the Wednesday after, i.e. we had 5 days (three actual work days and two weekend days) in between these two dates. This storage upgrade caused the entire server to crash due to some partitioning issues they had introduced. The group responsible for the update worked Friday, the entire weekend and a few hours Monday on restoring the server to a working state. Once the server worked again, the server had been rolled back its state around 1.5 weeks, which meant that mismatches were introduced between the git repositories located on the server and the git repositories located on the developers' PCs. 
\\\\
This resulted in having to locate the developers with the newest editions of the various different repositories so they could push everything once again. This happened Monday afternoon around 15:00, which is also the final obligatory working hour across the project. Therefore some people had gone home, and some of the newest editions were not uploaded to the server. Our group therefore spent the entire Monday tracking down people who had information about the following issues:

\begin{enumerate}
    \item Download from remote server would not start on any client side application.
    \item Unable to login due to a ``The database does not contain any profiles'' error.
    \begin{itemize}
        \item Note: Issue 2 was revealed once issue 1 had been resolved.
    \end{itemize}
    \item Unable to start applications from the \launcher.   
    \begin{itemize}
        \item Note: Issue 3 was revealed once issue 2 had been resolved. 
    \end{itemize}
\end{enumerate}

Issue 1 was related to rolling back the MySQL server, which had created a mismatch between the MySQL user password located on the Jenkins server and the actual password needed to access the database. This was resolved due to help from group SW610F15, whom suggested changing the MySQL password to a previous version.
\\\\
Once issue 1 had been resolved, issue 2 presented itself when trying to log into the \giraf launcher. No matter how one attempted to login, an Android Toast (small message) would be displayed saying that no profiles were present in the database. This issue was directly related to one of the groups not pushing all their work after the server reset. This group had been working on making some applications standalone, and therefore also worked on a standalone \androidinline{Content Provider}. An \androidinline{Content Provider} is used in Android applications to manage access to a data source \parencite{android_content_provider}. 
\\\\
The \androidinline{Content Provider} used by the standalone applications would change, from the \androidinline{Content Provider} provided by the launcher to the application's own standalone \androidinline{Content Provider} described in file called \mono{QuxContentProviderAuthority.java}, if these applications were not launched from the \giraf \launcher. 
\\\\
This new way of managing content providers, unfortunately had the side effect that the \giraf \launcher also had to have a file called \mono{QuxContentProviderAuthority.java} which had to reference its own content provider in order to make the \giraf \launcher work properly. Only the \giraf \launcher did not have such a file since the group working on standalone applications had not informed anyone else about how this new system worked, and the file committed by the standalone group had not been added to the \giraf \launcher repository after the rollback. 
\\\\
The effect of this missing file was that any SQL calls would just return that the size of any accessed table was zero, even though it was clearly visible through the log in Android Studio that all data was downloaded with the initial download. Once this had been discovered, the missing \mono{QuxContentProviderAuthority.java} file was added to the launcher and logins were once again possible.
\\\\
Hereafter it was discovered that all the other applications were getting the same error as in issue 2, once attempted launched through the \launcher application (issue 3). This was caused by a coding mistake in the \emph{Meta-Database} repository which contains the implementation of how to handle the Content Providers mentioned in issue 2. The implementation did not correctly check whether or not applications were launched from the \giraf \launcher, which caused every application to have to contain the \mono{QuxContentProviderAuthority.java} as well, which was not intended by the group who worked on the Content Providers. To solve the issue we included the Qux file in every application, and we could finally correctly start all the applications come Tuesday around 17:00. 
\\\\
We managed to solve all three issues, such that all applications in the \giraf suite was in a usable state, and we could therefore successfully execute the Sprint Review Meeting with customers present without any issues or crashes. Furthermore the group which had introduced issue 2 and 3 were aware of the mistake, and implemented a fix by Wednesday afternoon such that only the standalone applications and the \giraf \launcher were required to have the Qux file when updated to new versions of their libraries.
\\\\
Even though we manage to solve the issues after the server crash, the consequences of this was that there was spent a lot of time on resolving an issue rather than spending time on resolving other development tasks. Since this problem occured so close to sprint end, some groups was forced to extend the workdays to reach the goal of stable and polished apps.