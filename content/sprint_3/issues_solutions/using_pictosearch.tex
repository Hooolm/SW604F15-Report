%!TEX root = ../../../super_main.tex

\section{Using \ps}
\label{sec:using_pictosearch}

A common use case, when using the \ct, is that the user wants to find and use pictograms in various situations, for instance as an icon for a category or populating categories. For this purpose we utilize an application developed for the \giraf software suite called \ps. This application includes an \androidinline{Activity} subclass called \androidinline{PictoAdminMain} which is able to return one or more pictograms to the calling \androidinline{Activity} when a user enters a search string and selects pictograms. 
\\\\
\ps is used in three ways in the \ct: When creating a category, when editing a category, and when populating categories with pictograms. In order to use an \androidinline{Activity} from another application, the \androidinline{Intent}-class is utilized. An \androidinline{Activity} is, using this, able to make a request to another activity asking for some result across the operating system, in our case a very specific request to \ps asking for pictogram identifiers. 

\lstinputlisting[
    style = Java,
    caption = {A request for a single pictogram.},
    label = {lst:intent_example},
]{content/sprint_3/issues_solutions/intent_example.java}

The code in \lstref{lst:intent_example} shows an example of how we, using an \androidinline{Intent} instance, open \ps and ask for a single pictogram \footnote{Please note that the way of making request to \ps has changed since then.}. By using the \androidinline{PICTO_SEARCH_SINGLE_TAG}-tag, the user is only able to select a single pictogram, whereas the \androidinline{PICTO_SEARCH_MULTI_TAG}-tag is used when multiple pictograms should be returned (for instance when populating a category). 
\\\\
When a user has selected the desired pictograms, he is returned to the \ct, where the \androidinline{onActivityResult} method is called to handle the result of the \androidinline{Intent}. Using the request code \androidinline{GET_SINGLE_PICTOGRAM}, this method knows what request has been answered, and can now perform some action based on this.